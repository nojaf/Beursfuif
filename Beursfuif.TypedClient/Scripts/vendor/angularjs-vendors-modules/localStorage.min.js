(function(){"use strict";var n=angular.module("LocalStorageModule",[]);n.provider("localStorageService",function(){this.prefix="ls";this.cookie={expiry:30,path:"/"};this.notify={setItem:!0,removeItem:!1};this.setPrefix=function(n){this.prefix=n};this.setStorageCookie=function(n,t){this.cookie={expiry:n,path:t}};this.setNotify=function(n,t){this.notify={setItem:n,removeItem:t}};this.$get=["$rootScope",function(n){var t=this.prefix,e=this.cookie,u=this.notify;t.substr(-1)!=="."&&(t=!t?"":t+".");var i=function(){try{var r="localStorage"in window&&window.localStorage!==null,i=t+"__"+Math.round(Math.random()*1e7);return r&&(localStorage.setItem(i,""),localStorage.removeItem(i)),!0}catch(u){return n.$broadcast("LocalStorageModule.notification.error",u.message),!1}}(),s=function(f,e){if(!i)return n.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),u.setItem&&n.$broadcast("LocalStorageModule.notification.setitem",{key:f,newvalue:e,storageType:"cookie"}),r(f,e);typeof e=="undefined"&&(e=null);try{(angular.isObject(e)||angular.isArray(e))&&(e=angular.toJson(e));localStorage.setItem(t+f,e);u.setItem&&n.$broadcast("LocalStorageModule.notification.setitem",{key:f,newvalue:e,storageType:"localStorage"})}catch(o){return n.$broadcast("LocalStorageModule.notification.error",o.message),r(f,e)}return!0},a=function(r){if(!i)return n.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),l(r);var u=localStorage.getItem(t+r);return!u||u==="null"?null:u.charAt(0)==="{"||u.charAt(0)==="["?angular.fromJson(u):u},h=function(r){if(!i)return n.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),u.removeItem&&n.$broadcast("LocalStorageModule.notification.removeitem",{key:r,storageType:"cookie"}),f(r);try{localStorage.removeItem(t+r);u.removeItem&&n.$broadcast("LocalStorageModule.notification.removeitem",{key:r,storageType:"localStorage"})}catch(e){return n.$broadcast("LocalStorageModule.notification.error",e.message),f(r)}return!0},v=function(){var r,u,f;if(!i)return n.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;r=t.length;u=[];for(f in localStorage)if(f.substr(0,r)===t)try{u.push(f.substr(r))}catch(e){return n.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return u},y=function(r){var r=r||"",e=t.slice(0,-1)+".",s=RegExp(e+r),f,u;if(!i)return n.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),o();f=t.length;for(u in localStorage)if(s.test(u))try{h(u.substr(f))}catch(c){return n.$broadcast("LocalStorageModule.notification.error",c.message),o()}return!0},c=function(){try{return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}catch(t){return n.$broadcast("LocalStorageModule.notification.error",t.message),!1}},r=function(i,r){if(typeof r=="undefined")return!1;if(!c())return n.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var f="",u=new Date;r===null?(u.setTime(u.getTime()+-864e5),f="; expires="+u.toGMTString(),r=""):e.expiry!==0&&(u.setTime(u.getTime()+e.expiry*864e5),f="; expires="+u.toGMTString());!i||(document.cookie=t+i+"="+encodeURIComponent(r)+f+"; path="+e.path)}catch(o){return n.$broadcast("LocalStorageModule.notification.error",o.message),!1}return!0},l=function(i){var f,u,r;if(!c())return n.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(f=document.cookie.split(";"),u=0;u<f.length;u++){for(r=f[u];r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(t+i+"=")===0)return decodeURIComponent(r.substring(t.length+i.length+1,r.length))}return null},f=function(n){r(n,null)},o=function(){for(var u,n=null,e=t.length,r=document.cookie.split(";"),i=0;i<r.length;i++){for(n=r[i];n.charAt(0)===" ";)n=n.substring(1,n.length);u=n.substring(e,n.indexOf("="));f(u)}};return{isSupported:i,set:s,add:s,get:a,keys:v,remove:h,clearAll:y,cookie:{set:r,add:r,get:l,remove:f,clearAll:o}}}]})}).call(this);
/*
//# sourceMappingURL=localStorage.min.js.map
*/